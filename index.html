<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="./app_v4.9.0.css">
  <title>Mobinode</title>
</head>

<body>
  <!-- Barra superior: s√≥ t√≠tulo + a√ß√µes de arquivo + ajuda -->
  <div id="ui" role="banner" aria-label="Barra superior">
    <div class="topbar-left">
      <strong class="appname">Mobinode</strong>
      <span class="sep">|</span>
    </div>
    <div class="topbar-right" role="group" aria-label="Arquivo">
      <div class="dropdown" id="fileDropdown" aria-label="Arquivo">
        <button id="btnFile" title="Arquivo">Arquivo <span class="caret">‚ñæ</span></button>
        <div class="dropdown-menu" role="menu" aria-label="Menu Arquivo">
          <button class="dropdown-item" id="menuNewProject" type="button">Novo‚Ä¶</button>
          <button class="dropdown-item" id="menuImport" type="button">Importar JSON‚Ä¶</button>
          <button class="dropdown-item" id="menuExport" type="button">Exportar JSON‚Ä¶</button>
          <button class="dropdown-item" id="menuExportPNG" type="button">Exportar PNG‚Ä¶</button>
          <button class="dropdown-item" id="menuExportPDF" type="button">Exportar PDF‚Ä¶</button>
          <div class="dropdown-sep" role="separator"></div>
          <button class="dropdown-item danger" id="menuClear" type="button">Limpar‚Ä¶</button>
        </div>
      </div>
      <button id="btnConfig" title="Configura√ß√µes">Configura√ß√µes</button>
      <button id="btnAbout" title="Sobre">Sobre</button>
      <button id="btnUndo" title="Desfazer (Ctrl+Z)">‚Ü∫</button>
      <button id="btnRedo" title="Refazer (Ctrl+Y)">‚Üª</button>
    </div>
  </div>

  <button id="btnShowSidebar" class="propsToggle" title="Abrir painel de propriedades" style="display:none;">
    ‚úè Propriedades
  </button>

  <button id="btnHelp" class="helpToggle" title="Ajuda" >‚ùì Ajuda</button>

  <!-- Dock de ferramentas (desktop: lateral; mobile: inferior) -->
  <div id="dockTools" class="toolDock" role="toolbar" aria-label="Ferramentas">
    <div id="tools" class="toolgroup" aria-label="Ferramentas principais">
      <button aria-pressed="false" title="Seta">üñ±Ô∏è</button>
      <button id="toolPan" class="toolbtn" aria-pressed="false" title="Pan">üñêÔ∏è</button>
      <button id="toolStation" class="toolbtn" aria-pressed="false" title="Esta√ß√£o">
        <span class="tool-linebadge" aria-hidden="true">
          <span class="tool-linebadge-circle">
            <span class="tool-linebadge-text">1</span>
          </span>
        </span>
      </button>
      <button id="toolLine" class="toolbtn" aria-pressed="false" title="Linhas">üõ§Ô∏è</button>
      <button id="toolConnections" class="toolbtn" aria-pressed="false" title="Conex√µes">‚´ò</button>
      <button id="toolCurves" class="toolbtn" aria-pressed="false" title="Curvas (editar dobras)">‚ïÆ</button>
      <button id="toolText" class="toolbtn toolbtn-text" aria-pressed="false" title="Sinaliza√ß√£o">üìê</button>
      <button id="toolSelect" class="toolbtn" aria-pressed="false" title="Sele√ß√£o retangular">‚ñ≠</button>
    </div>
  </div>

  <!-- Ajuda -->
  <div id="helpPanel" class="helpPanel" style="display:none;" aria-label="Ajuda">
    <div class="helpHeader">
      <div class="helpTitle">Ajuda</div>
      <button id="btnHelpClose" class="iconbtn" title="Fechar">√ó</button>
    </div>
    <div id="helpContent" class="helpBody">
      <ul>
      <li>üñê pan</li>
      <li>‚ö™ cria esta√ß√£o</li>
      <li>üìê cria sinaliza√ß√£o</li>
      <li>üõ§Ô∏è arraste de esta√ß√£o p/ esta√ß√£o pra conectar</li>
      <li>‚ïÆ edita dobras do tra√ßado</li>
      <li>‚ñ≠ seleciona/move</li>
      <li>ALT: encadear conex√µes</li>
      <li>Scroll: zoom</li>
      <li>Shift: soma</li>
      <li>Delete: apaga sele√ß√£o</li>
      <li>Ctrl+Z/Y: desfazer/refazer</li>
      </ul>
    </div>
  </div>

  <aside id="sidebar">
    <header>
      <div>
        <h3 id="sidebarTitle">Mobinode</h3>
        <div id="sidebarMeta" class="meta"></div>
      </div>
      <button id="btnCloseSidebar" class="iconbtn" title="Fechar">√ó</button>
    </header>

    <div class="propsRoot">

      <section id="accStation">
        <summary>Esta√ß√£o</summary>
        <div class="acc-body">
          <div id="stationEmpty" class="empty-note">Selecione uma esta√ß√£o para editar.</div>
          <div id="stationPanel">
          <div class="row">
              <button id="btnAddStationAfter" title="Cria uma nova esta√ß√£o conectada √† linha ativa">Nova esta√ß√£o</button>
              <button id="btnDeleteStation">Excluir esta√ß√£o</button>
            </div>

            <div class="field">
              <label for="stationQuickPick">Ir para esta√ß√£o (linha ativa)</label>
              <select id="stationQuickPick"></select>
              <div class="smallnote">Selecionou aqui? O Mobinode seleciona a esta√ß√£o no mapa pra voc√™ editar tudo no painel.</div>
            </div>


          <h4>Nome da esta√ß√£o</h4>
            <div class="field">
              <label class="inline">
                <input id="useStationPrefix" type="checkbox" />
                Usar prefixo (acima)
              </label>
              <div class="smallnote">Ative se quiser mostrar uma linha/etiqueta pequena acima do nome.</div>
            </div>

<div class="field" id="stationPrefixField" style="display:none;">
  <label for="stationPrefix">Prefixo (acima)</label>
  <input id="stationPrefix" type="text" placeholder="Ex.: Corinthians" />
  <div class="smallnote">Dica: use ‚Äú/‚Äù ou Enter pra quebrar em mais de uma linha.</div>
</div>

<div class="field">
  <label for="stationName">Nome principal</label>
  <input id="stationName" type="text" placeholder="Ex.: Itaquera" />
  <div class="smallnote">Esse √© o nome grande que aparece no mapa.</div>
</div>

<div class="field">
  <label class="inline">
    <input id="useStationSuffix" type="checkbox" />
    Usar sufixo (abaixo)
  </label>
  <div class="smallnote">Ative se quiser mostrar uma linha/etiqueta pequena abaixo do nome.</div>
</div>

<div class="field" id="stationSuffixField" style="display:none;">
  <label for="stationSuffix">Sufixo (abaixo)</label>
  <input id="stationSuffix" type="text" placeholder="Ex.: Rede Gatos / Ultrafarma" />
  <div class="smallnote">Tamb√©m aceita ‚Äú/‚Äù ou Enter pra virar m√∫ltiplas linhas pequenas.</div>
</div>
            <div class="field">
              <label for="stationOrientation">Orienta√ß√£o</label>
              <select id="stationOrientation">
                <option value="-90">‚Üë -90¬∞</option>
                <option value="-45">‚Üó -45¬∞</option>
                <option value="0">‚Üí 0¬∞</option>
                <option value="45">‚Üò 45¬∞</option>
                <option value="90">‚Üì 90¬∞</option>
                <option value="135">‚Üô 135¬∞</option>
                <option value="180">‚Üê 180¬∞</option>
                <option value="-135">‚Üñ -135¬∞</option>
              </select>
              <div class="smallnote">Dica: isso gira o nome (e prefixo/sufixo) ao redor da esta√ß√£o.</div>
            </div>

            <div class="field">
  <label>Ajuste fino do nome</label>

  <div class="slider-field" style="margin-top:6px;">
    <span class="smallnote" style="min-width:18px;">X</span>
    <input id="stationLabelOffsetXRange" type="range" min="-120" max="120" step="1" value="0" />
    <input id="stationLabelOffsetX" class="num" type="number" min="-120" max="120" step="1" value="0" />
  </div>

  <div class="slider-field" style="margin-top:6px;">
    <span class="smallnote" style="min-width:18px;">Y</span>
    <input id="stationLabelOffsetYRange" type="range" min="-120" max="120" step="1" value="0" />
    <input id="stationLabelOffsetY" class="num" type="number" min="-120" max="120" step="1" value="0" />
  </div>

  <div class="row" style="margin-top:8px;">
    <button id="btnStationLabelOffsetReset" type="button">Resetar ajuste fino</button>
  </div>

  <div class="smallnote">Move o nome em X/Y sem mexer na orienta√ß√£o. √ìtimo pra alinhar em casos chatos.</div>
</div>


            <div class="row" style="margin-top:10px;">
              <button id="applyStationOrientationActiveLine" type="button">
                Aplicar orienta√ß√£o em toda a linha
              </button>
            </div>

            <div class="field">
              <label>Posi√ß√£o (snap)</label>
              <div id="stationPos" class="smallnote"></div>
            </div>

            <div class="field">
                    <h4>Estilo da esta√ß√£o</h4>
                      <label>Forma</label>
                      <select id="stationStyleShape">
                        <option value="circle">C√≠rculo</option>
                        <option value="square">Quadrado</option>
                        <option value="diamond">Losango</option>
                        <option value="pill">P√≠lula</option>
                      </select>
                  <label>Tamanho (di√¢metro)</label>
                  <div class="slider-field">
                    <input type="range" id="stationStyleSizeRange" min="4" max="80" step="1">
                    <input type="number" id="stationStyleSize" min="4" max="80" step="1" class="num" />
                  </div>

                  <div id="stationStyleDims" style="display:none;">
                    <label>Largura</label>
                    <div class="slider-field">
                      <input type="range" id="stationStyleWidthRange" min="0.6" max="2.6" step="0.05">
                      <input type="number" id="stationStyleWidth" min="0.6" max="2.6" step="0.05" class="num" />
                    </div>

                    <label>Altura</label>
                    <div class="slider-field">
                      <input type="range" id="stationStyleHeightRange" min="0.6" max="2.6" step="0.05">
                      <input type="number" id="stationStyleHeight" min="0.6" max="2.6" step="0.05" class="num" />
                    </div>

                    <div class="smallnote">Ajusta a propor√ß√£o da esta√ß√£o (somente Quadrado e P√≠lula). Na P√≠lula, o maior eixo vira o "comprimento".</div>
                  </div>

                  <label>Tamanho da borda</label>
                  <div class="slider-field">
                    <input type="range" id="stationStyleStrokeWidthRange" min="0" max="20" step="1">
                    <input type="number" id="stationStyleStrokeWidth" min="0" max="20" step="1" class="num" />
                  </div>

                  <label>Cor de preenchimento</label>
                  <div class="inline">
                  <input type="color" id="stationStyleFill">
                  <button type="button" id="btnStationFillDefault" class="color-action">Preenchimento padr√£o</button>
                  </div>

                  <label>Cor da borda</label>
                  <div class="inline">
                  <input type="color" id="stationStyleStroke">
                  <button type="button" id="btnStationStrokeLine" class="color-action">Borda com a cor da linha</button>
                  </div>

                  <button id="applyStationStyleActiveLine" type="button">
                    Aplicar a todas as esta√ß√µes da linha ativa
                  </button>
                  <button id="applyStationStyleSelection" type="button" style="display:none;">
                    Aplicar √†s esta√ß√µes selecionadas
                  </button>
                </div>

          </div>
        </div>
      </section>

      <section id="accLine">
        <summary>Linhas</summary>
        <div class="acc-body">

        <!-- lista de linhas-->
          <div id="linePanel">
            <h4>Todas as linhas</h4>
            <div class="smallnote">Dica: clique numa linha na lista pra torn√°-la ativa.</div>
            <div class="row">
              <button id="btnAddLine">+ Nova linha</button>
            </div>
            <div id="lineList" class="line-list"></div>
                    <h4>Propriedades da linha</h4>
            <div class="field">
              <label for="lineName">Nome</label>
              <input id="lineName" type="text" placeholder="Ex.: Linha Azul" />
            </div>

            <div class="field" id="lineDefaultOrientationField" style="display:none;">
              <label for="lineDefaultOrientation">Orienta√ß√£o padr√£o</label>
              <select id="lineDefaultOrientation">
                <option value="">Selecionar...</option>
                <option value="-90">‚Üë -90¬∞</option>
                <option value="-45">‚Üó -45¬∞</option>
                <option value="0">‚Üí 0¬∞</option>
                <option value="45">‚Üò 45¬∞</option>
                <option value="90">‚Üì 90¬∞</option>
                <option value="135">‚Üô 135¬∞</option>
                <option value="180">‚Üê 180¬∞</option>
                <option value="-135">‚Üñ -135¬∞</option>
              </select>
              <div class="field">
              <label class="inline">
                <input id="lineApplyDefaultOrientation" type="checkbox" />
                Aplicar orienta√ß√£o padr√£o...
              </label>
              <div class="smallnote">Ative para aplicar uma orienta√ß√£o em massa nas esta√ß√µes dessa linha.</div>
            </div>
              <div class="smallnote">Ao escolher uma op√ß√£o, o app vai pedir confirma√ß√£o.</div>
            </div>

          <div class="field">
            <label class="inline inline-between">
              <span>Identifica√ß√£o</span>
              <span class="inline">
                <input id="lineBadgeEnabled" type="checkbox" />
              </span>
            </label>
            <div class="smallnote">Mostra um c√≠rculo com a cor da linha e um texto curto no tra√ßado.</div>
          </div>

          <div class="field">
            <label for="lineBadgeText">Texto da identifica√ß√£o (Max. 2 caract.)</label>
            <input id="lineBadgeText" type="text" maxlength="2" placeholder="Ex.: 1, A, 1A etc. Aceitamos emoji!" />
            <div class="smallnote">Dica: voc√™ pode usar 1 ou 2 caracteres (incluindo emoji). O app vai cortar o excesso automaticamente.</div>
          </div>

          <div class="field">
            <label>Posi√ß√£o da indica√ß√£o na linha</label>
            <div class="radio-group" role="radiogroup" aria-label="Posi√ß√£o da indica√ß√£o na linha">
              <label class="radio-option"><input id="lineBadgePosStart" type="radio" name="lineBadgePos" value="start" /> No in√≠cio</label>
              <label class="radio-option"><input id="lineBadgePosEnd" type="radio" name="lineBadgePos" value="end" /> No final</label>
            </div>
          </div>

            <div class="field">
              <h4>Estilo da linha</h4>
              <label>Cor</label>
              <div class="inline">
                <input id="lineColor" type="color" />
                <input id="lineColorHex" type="text" placeholder="#3b82f6" />
              </div>
              <label for="lineWidth">Espessura</label>
              <div class="slider-field">
                <input id="lineWidthRange" type="range" min="2" max="30" step="1" />
                <input id="lineWidth" type="number" min="2" max="30" step="1" class="num" />
              </div>
              <button id="applyLineWidthAll" type="button">Aplicar espessura a todas as linhas</button>
              <label for="lineStyle">Tipo de tra√ßo</label>
              <select id="lineStyle">
                <option value="solid">S√≥lido</option>
                <option value="dashed">Tracejado</option>
                <option value="dotted">Pontilhado</option>
              </select>

              <!-- v4.9.0: tra√ßo secund√°rio (estilo Recife-like) -->
              <div class="field" style="margin-top:12px;">
                <label class="inline inline-between">
                  <span>Tra√ßo secund√°rio</span>
                  <span class="inline"><input id="lineSecondaryEnabled" type="checkbox" /></span>
                </label>
                <div id="lineSecondaryControls" style="display:none; margin-top:8px;">
                  <label for="lineSecondaryMode">Cor secund√°ria</label>
                  <select id="lineSecondaryMode">
                    <option value="custom">Personalizada</option>
                    <option value="line">Usar cor de outra linha</option>
                  </select>

                  <div id="lineSecondaryCustom" class="inline" style="margin-top:6px;">
                    <input id="lineSecondaryColor" type="color" />
                    <input id="lineSecondaryColorHex" type="text" placeholder="#f97316" />
                  </div>

                  <div id="lineSecondaryFromLine" style="margin-top:6px; display:none;">
                    <select id="lineSecondaryLineId"></select>
                  </div>
                  <div class="smallnote">Pra trechos compartilhados: o segundo tra√ßo aparece por dentro da linha principal.</div>
                </div>
              </div>
        </div>

        <!-- Esta√ß√µes interligadas -->
            <div id="edgeActions">
            <div class="section-title">Esta√ß√µes conectadas (linha ativa)</div>
            <div id="lineStations" class="smallnote"></div>
              <div class="section-title" style="margin-top:16px;">Conex√£o selecionada</div>
              <div id="edgeInfo" class="pill"></div>
              <div class="row" style="margin-top:10px;">
                <button id="btnDeleteEdge" type="button">Excluir conex√£o</button>
                <!--button id="btnClearEdge" type="button">Desselecionar</button-->
              </div>
              <div class="field" style="margin-top:10px;">
                <label for="edgeInterchangeMode">Tipo de conex√£o</label>
                <!--select id="edgeInterchangeMode">
                  <option value="unified">Unificado</option>
                  <option value="stack">Empilhado</option>
                </select -->
                <div class="smallnote">Muda como integra√ß√µes entre linhas s√£o desenhadas.</div>
              </div>
            </div>
          </div>

            <div class="row">
              <button id="btnDeleteLine">Excluir linha</button>
            </div>
          </div>
        </div>
      </section>

      <!-- ‚úÖ NOVO: Conex√µes-->
      <section id="accConnections">
        <summary>Conex√µes</summary>
        <div class="acc-body">
          <div class="section-title">Conex√µes</div>

            <div class="section-title" style="margin-top:16px;">Conectar</div>
            <div class="smallnote">
              No modo <b>Esta√ß√£o</b>: <b>ALT</b> arraste de uma esta√ß√£o para outra (ou para o vazio para criar uma nova).
              <br/>
              <b>Shift</b>: conectar rapidamente (sem encadear).
            </div>

            <!-- Ctrl+F: connLineColor (Estilo da conex√£o) -->
            <div class="section-title" style="margin-top:16px;">Estilo da conex√£o</div>
            <div class="field">
              <label>Cor do tra√ßado</label>
              <div class="color-row">
                <input id="connLineColor" type="color" value="#ffffff" />
                <input id="connLineColorHex" type="text" value="#ffffff" />
              </div>
            </div>

            <div class="field">
              <label for="connLineWidth">Espessura</label>
              <div class="slider-field">
                <input id="connLineWidthRange" type="range" min="1" max="30" step="1" />
                <input id="connLineWidth" type="number" min="1" max="30" step="1" class="num" />
              </div>
            </div>

            <!-- Ctrl+F: connNodeSize (Pontos de conex√£o) -->
          <div class="section-title" style="margin-top:16px;">Pontos de conex√£o</div>

          <div class="field">
            <label for="connNodeShape">Forma</label>
            <select id="connNodeShape">
              <option value="circle">C√≠rculo</option>
              <option value="pill">P√≠lula</option>
              <option value="square">Quadrado</option>
              <option value="diamond">Losango</option>
            </select>
          </div>

          <div class="field">
            <label for="connNodeSize">Tamanho</label>
            <div class="slider-field">
              <input id="connNodeSizeRange" type="range" min="2" max="30" step="1" />
              <input id="connNodeSize" type="number" min="2" max="30" step="1" class="num" />
            </div>
          </div>

          <div class="field">
            <label>Preenchimento</label>
            <div class="color-row">
              <input id="connNodeFill" type="color" value="#cfcfcf" />
              <input id="connNodeFillHex" type="text" value="#cfcfcf" />
            </div>
          </div>

          <div class="field">
            <label>Borda</label>
            <div class="color-row">
              <input id="connNodeStroke" type="color" value="#000000" />
              <input id="connNodeStrokeHex" type="text" value="rgba(0,0,0,0.18)" />
            </div>
          </div>

          <div class="field">
            <label for="connNodeStrokeWidth">Espessura da borda</label>
            <div class="slider-field">
              <input id="connNodeStrokeWidthRange" type="range" min="0" max="10" step="1" />
              <input id="connNodeStrokeWidth" type="number" min="0" max="10" step="1" class="num" />
            </div>
          </div>
        </div>
      </section>

      <!-- ‚úÖ NOVO: Sinaliza√ß√£o -->
      <section id="accText">
        <summary>Texto e sinaliza√ß√£o</summary>
        <div class="acc-body">
          <div id="textEmpty" class="empty-note">Abra esta se√ß√£o para escolher sinaliza√ß√µes ou criar texto livre. Selecione um elemento no mapa para ajustar ou apagar.</div>

          <div class="section-title" style="margin-top:16px;">Texto livre</div>
            <div class="field">
              <label for="textContent">Conte√∫do</label>
              <textarea id="textContent" placeholder="Digite e clique no mapa para posicionar."></textarea>
              <div class="smallnote">No modo üìê, <b>clicar no mapa cria texto por padr√£o</b>. Se voc√™ escolher uma identifica√ß√£o/nome acima, o pr√≥ximo clique cria sinaliza√ß√£o ‚Äî ou, se um texto estiver selecionado, ele vira sinaliza√ß√£o.</div>
            </div>

            <div class="field">
              <label>Estilo</label>
              <div class="format-row">
                <button id="btnTextBold" class="formatbtn" type="button" aria-pressed="false" title="Negrito"><span class="fmt-b">B</span></button>
                <button id="btnTextItalic" class="formatbtn" type="button" aria-pressed="false" title="It√°lico"><span class="fmt-i">I</span></button>
              </div>
              <div class="smallnote">Obs.: negrito/it√°lico afeta s√≥ sinaliza√ß√£o de <b>nome</b>. Identifica√ß√µes usam estilo fixo.</div>
            </div>

            <div class="section-title" style="margin-top:16px;">Elemento selecionado</div>
            <div id="signageSelected" class="signage-selected">Nenhum elemento selecionado.</div>

            <div class="field">
              <label for="textSize">Tamanho</label>
              <div class="slider-field">
                <input id="textSizeRange" type="range" min="8" max="120" step="1" />
                <input id="textSize" type="number" min="8" max="120" step="1" class="num" />
              </div>
              <div class="smallnote">Dica: selecione um elemento no mapa e pressione <b>Delete</b> para apagar.</div>
            </div>

          <div id="textPanel">
            <div class="section-title">Identifica√ß√µes</div>
            <div id="signageBadges" class="signage-grid"></div>

            <div class="section-title" style="margin-top:16px;">Nomes de linhas</div>
            <div id="signageNames" class="signage-name-list"></div>

            <div class="field" style="margin-top:10px;">
              <label class="inline">
                <input id="signageNameWithBadge" type="checkbox"/>
                Criar como <b>identifica√ß√£o + nome</b>
              </label>
              <div class="smallnote">Quando ativado, ao escolher um nome de linha acima voc√™ cria (ou transforma) um elemento com o c√≠rculo + o nome juntos.</div>
            </div>
            <div class="row">
              <button id="btnDeleteText">Excluir elemento</button>
            </div>
          </div>
        </div>
      </section>

      <section id="accMulti">
        <summary>Sele√ß√£o</summary>
        <div class="acc-body">
          <div id="multiEmpty" class="empty-note">Selecione 2+ esta√ß√µes para a√ß√µes em massa.</div>
          <div id="multiPanel">
            <div id="multiInfo" class="pill"></div>
            <div class="field">
              <h4>Estilo das esta√ß√µes selecionadas</h4>
              <label>Forma</label>
              <select id="multiStationStyleShape">
                <option value="">‚Äî (misto)</option>
                <option value="circle">C√≠rculo</option>
                <option value="square">Quadrado</option>
                <option value="diamond">Losango</option>
                <option value="pill">P√≠lula</option>
              </select>

              <label>Tamanho (di√¢metro)</label>
              <div class="slider-field">
                <input type="range" id="multiStationStyleSizeRange" min="4" max="80" step="1">
                <input type="number" id="multiStationStyleSize" min="4" max="80" step="1" class="num" />
              </div>

              <div id="multiStationStyleDims" style="display:none;">
                <label>Largura</label>
                <div class="slider-field">
                  <input type="range" id="multiStationStyleWidthRange" min="0.6" max="2.6" step="0.05">
                  <input type="number" id="multiStationStyleWidth" min="0.6" max="2.6" step="0.05" class="num" />
                </div>

                <label>Altura</label>
                <div class="slider-field">
                  <input type="range" id="multiStationStyleHeightRange" min="0.6" max="2.6" step="0.05">
                  <input type="number" id="multiStationStyleHeight" min="0.6" max="2.6" step="0.05" class="num" />
                </div>

                <div class="smallnote">Ajusta a propor√ß√£o (somente Quadrado e P√≠lula). Na P√≠lula, o maior eixo vira o "comprimento".</div>
              </div>

              <label>Tamanho da borda</label>
              <div class="slider-field">
                <input type="range" id="multiStationStyleStrokeWidthRange" min="0" max="20" step="1">
                <input type="number" id="multiStationStyleStrokeWidth" min="0" max="20" step="1" class="num" />
              </div>

              <label>Cor de preenchimento</label>
              <div class="inline">
              <input type="color" id="multiStationStyleFill">
              <button type="button" id="btnMultiFillDefault" class="color-action">Preenchimento padr√£o</button>
              </div>

              <label>Cor da borda</label>
              <div class="inline">
              <input type="color" id="multiStationStyleStroke">
              <button type="button" id="btnMultiStrokeLine" class="color-action">Borda com a cor da linha</button>
              </div>

              <div id="multiStationStyleNote" class="smallnote">Dica: qualquer ajuste aqui aplica na hora em todas as esta√ß√µes selecionadas (Ctrl+Z desfaz).</div>
            </div>
            <div class="field">
              <label for="multiOrientation">Orienta√ß√£o</label>
              <select id="multiOrientation">
                <option value="">‚Äî (misto)</option>
                <option value="-90">‚Üë -90¬∞</option>
                <option value="-45">‚Üó -45¬∞</option>
                <option value="0">‚Üí 0¬∞</option>
                <option value="45">‚Üò 45¬∞</option>
                <option value="90">‚Üì 90¬∞</option>
                <option value="135">‚Üô 135¬∞</option>
                <option value="180">‚Üê 180¬∞</option>
                <option value="-135">‚Üñ -135¬∞</option>
              </select>
              <div class="smallnote">Aplica a orienta√ß√£o em todas as esta√ß√µes selecionadas.</div>
            </div>

            <div class="field">
  <label>Ajuste fino do nome (sele√ß√£o)</label>

  <div class="slider-field" style="margin-top:6px;">
    <span class="smallnote" style="min-width:18px;">X</span>
    <input id="multiStationLabelOffsetXRange" type="range" min="-120" max="120" step="1" value="0" />
    <input id="multiStationLabelOffsetX" class="num" type="text" value="‚Äî" />
  </div>

  <div class="slider-field" style="margin-top:6px;">
    <span class="smallnote" style="min-width:18px;">Y</span>
    <input id="multiStationLabelOffsetYRange" type="range" min="-120" max="120" step="1" value="0" />
    <input id="multiStationLabelOffsetY" class="num" type="text" value="‚Äî" />
  </div>

  <div class="row" style="margin-top:8px;">
    <button id="btnMultiStationLabelOffsetReset" type="button">Resetar ajuste (sele√ß√£o)</button>
  </div>

  <div class="smallnote">Se aparecer ‚Äú‚Äî‚Äù, √© porque os valores das selecionadas est√£o diferentes. Mexer aplica em massa.</div>
</div>
            <div class="row" style="margin-top:10px;">
              <button id="btnDeleteSelection">Excluir sele√ß√£o</button>
              <button id="btnClearSelection">Limpar sele√ß√£o</button>
            </div>
          </div>
        </div>
      </section>
</div>
  </aside>

  <!-- Modal Importar/Exportar -->
  <div id="modal" class="modal" style="display:none;" role="dialog" aria-modal="true" aria-label="Importar/Exportar JSON">
    <div class="modal-card">
      <div class="modal-header">
        <div id="modalTitle" class="modal-title">JSON</div>
        <button id="btnModalClose" class="iconbtn" title="Fechar">√ó</button>
      </div>
      <textarea id="modalTextarea" spellcheck="false"></textarea>
      <div class="row">
        <button id="btnModalPrimary" type="button">OK</button>
        <button id="btnModalTertiary" type="button" style="display:none;">Baixar</button>
        <button id="btnModalSecondary" type="button">Cancelar</button>
      </div>
    </div>
  </div>


  <!-- Modal Configura√ß√µes -->
  <div id="settingsModal" class="modal" style="display:none;" role="dialog" aria-modal="true" aria-label="Configura√ß√µes">
    <div class="modal-card modal-card-settings">
      <div class="modal-header">
        <div class="modal-title">Configura√ß√µes</div>
        <button id="btnSettingsClose" class="iconbtn" title="Fechar">√ó</button>
      </div>

      <div class="section-title">Apar√™ncia</div>
      <div class="field">
        <label>Tema</label>
        <div class="radio-group" role="radiogroup" aria-label="Tema">
          <label class="radio-option"><input id="themeDark" type="radio" name="appTheme" value="dark"> Escuro</label>
          <label class="radio-option"><input id="themeLight" type="radio" name="appTheme" value="light"> Claro</label>
          <label class="radio-option"><input id="themeSystem" type="radio" name="appTheme" value="system"> Padr√£o do dispositivo</label>
        </div>
      </div>

<div class="section-title">Aplicativo</div>
<div class="field">
  <label>Posi√ß√£o da dock de ferramentas</label>
  <div class="radio-group" role="radiogroup" aria-label="Posi√ß√£o da dock de ferramentas">
    <label class="radio-option"><input id="dockPosSide" type="radio" name="dockPos" value="side"> Lateral</label>
    <label class="radio-option"><input id="dockPosBottom" type="radio" name="dockPos" value="bottom"> Fundo</label>
  </div>
</div>
</div>
    </div>
  </div>

  <!-- Modal Sobre -->
  <div id="aboutModal" class="modal" style="display:none;" role="dialog" aria-modal="true" aria-label="Sobre o Mobinode">
    <div class="modal-card modal-card-about">
      <div class="modal-header">
        <div id="aboutTitle" class="modal-title">Sobre</div>
        <button id="btnAboutClose" class="iconbtn" title="Fechar">√ó</button>
      </div>

      <!-- List/Details (estilo GNOME) -->
      <div class="about-layout">
        <aside class="about-nav" aria-label="Se√ß√µes do painel Sobre">

          <div class="about-nav-list">
            <button class="about-nav-item active" type="button" data-about-tab="app">O aplicativo</button>
            <button class="about-nav-item" type="button" data-about-tab="news">Novidades</button>
            <button class="about-nav-item" type="button" data-about-tab="docs">Documenta√ß√£o</button>
          </div>

          <div class="about-nav-secondary" aria-label="Links">
            <button class="about-footer-link" type="button" data-about-action="donate">Doar</button>
            <a class="about-footer-link" data-about-action="github" href="https://github.com/" target="_blank" rel="noreferrer">GitHub</a>
          </div>
        </aside>
        <main class="about-details">
          <section class="about-pane active" data-about-pane="app">
            <h2>Mobinode</h2>
            <h4>vers√£o 4.9.0</h4>
            <p>
              Mobinode √© um editor visual para criar mapas esquem√°ticos de transporte (linhas, esta√ß√µes,
              integra√ß√µes e textos) direto no navegador ‚Äî r√°pido, leve e focado em clareza.
            </p>

            <div class="about-mini">
              <div class="about-mini-title">Dica r√°pida</div>
              <div class="about-mini-text">Segure <b>Alt</b> e arraste no vazio para criar uma linha com duas esta√ß√µes.</div>
            </div>
          </section>

          <section class="about-pane" data-about-pane="news">
            <h2>Novidades</h2>
            <ul class="about-list">
              <li><b>v4.8.x</b> ‚Äî Exporta√ß√£o em arquivo PNG e PDF implementada.</li>
              <li><b>v4.7.x</b> ‚Äî Evolu√ß√µes no editor e qualidade de vida.</li>
            </ul>
          </section>

          <section class="about-pane" data-about-pane="docs">
            <h2>Documenta√ß√£o</h2>
            <div class="mobinode-doc">
              <div class="mobinode-doc-scroll" style="max-height: 40vh; overflow:auto; padding: 14px; line-height: 1.5;">
                <h2>Como usar o Mobinode</h2>
                <p>
                  O Mobinode √© um editor de mapas de linhas (tipo metr√¥/VLT) baseado em <b>esta√ß√µes</b>, <b>conex√µes</b> e <b>linhas</b>.
                  Voc√™ trabalha sempre com uma <b>linha ativa</b> (a ‚Äúlinha atual‚Äù), cria esta√ß√µes e liga√ß√µes no canvas, e ajusta tudo pelo painel de propriedades.
                </p>

                <h3>Dicas r√°pidas (atalhos e gestos)</h3>
                <ul>
                  <li><b>Scroll</b>: zoom</li>
                  <li><b>üñêÔ∏è Pan</b>: arrasta a vis√£o (m√£ozinha)</li>
                  <li><b>üõ§Ô∏è Linhas</b>: modo de desenhar/conectar</li>
                  <li><b>‚ö™ Esta√ß√£o</b>: cria e conecta esta√ß√µes</li>
                  <li><b>üìê Texto e sinaliza√ß√£o</b>: cria textos/identifica√ß√µes/nome de linha</li>
                  <li><b>‚ñ≠ Sele√ß√£o</b>: sele√ß√£o retangular (marquee) e mover em grupo</li>
                  <li><b>ALT</b>: encadear conex√µes / criar novas esta√ß√µes ‚Äúno fluxo‚Äù</li>
                  <li><b>Shift</b>: ‚Äúconectar r√°pido‚Äù (sem encadear)</li>
                  <li><b>Delete</b>: apaga elemento selecionado (esta√ß√£o/conex√£o/texto)</li>
                  <li><b>Ctrl+Z</b> / <b>Ctrl+Y</b>: desfazer / refazer</li>
                </ul>

                <hr/>

                <h2>Esta√ß√£o</h2>
                <p>
                  Esta√ß√µes s√£o os n√≥s do seu mapa. Elas podem ter nome, prefixo/sufixo (multi-linhas), orienta√ß√£o do r√≥tulo e estilo visual
                  (forma, tamanho, cores, borda).
                </p>

                <h3>Criar esta√ß√£o</h3>
                <ul>
                  <li>Selecione a ferramenta <b>Esta√ß√£o</b> (‚ö™).</li>
                  <li><b>Clique no canvas</b> para criar uma esta√ß√£o na <b>linha ativa</b>.</li>
                  <li>Dica: a ferramenta Esta√ß√£o mostra um ‚Äúbadge‚Äù com a linha ativa (um mini c√≠rculo com a cor/ID) pra voc√™ n√£o se perder.</li>
                </ul>

                <h3>Editar nome da esta√ß√£o (prefixo, nome principal, sufixo)</h3>
                <ol>
                  <li><b>Clique na esta√ß√£o</b> para selecionar.</li>
                  <li>No painel <b>Esta√ß√£o</b>, edite:
                    <ul>
                      <li><b>Prefixo (acima)</b>: opcional. Ative ‚ÄúUsar prefixo‚Äù e escreva o texto.</li>
                      <li><b>Nome principal</b>: o nome grande exibido no mapa.</li>
                      <li><b>Sufixo (abaixo)</b>: opcional. Ative ‚ÄúUsar sufixo‚Äù e escreva o texto.</li>
                    </ul>
                  </li>
                  <li><b>Quebra de linha</b>: voc√™ pode usar <b>Enter</b> ou <b>‚Äú/‚Äù</b> para dividir prefixo/sufixo em m√∫ltiplas linhas.</li>
                </ol>

                <h3>Orienta√ß√£o e ajuste fino do texto</h3>
                <ul>
                  <li><b>Orienta√ß√£o</b>: gira o r√≥tulo da esta√ß√£o (nome/prefixo/sufixo) ao redor da esta√ß√£o (‚Üë ‚Üó ‚Üí ‚Üò ‚Üì ‚Üô ‚Üê ‚Üñ).</li>
                  <li><b>Ajuste fino X/Y</b>: desloca o texto sem mudar a orienta√ß√£o ‚Äî perfeito pra ‚Äúcasos chatos‚Äù onde o nome colide com o tra√ßado.</li>
                  <li><b>Resetar ajuste fino</b>: volta os offsets para o padr√£o.</li>
                  <li><b>Aplicar orienta√ß√£o em toda a linha</b>: usa a orienta√ß√£o atual como ‚Äúcarimbo‚Äù em massa na linha ativa.</li>
                </ul>

                <h3>Estilo da esta√ß√£o</h3>
                <p>Voc√™ pode personalizar a apar√™ncia de cada esta√ß√£o:</p>
                <ul>
                  <li><b>Forma</b>: C√≠rculo, Quadrado, Losango, P√≠lula.</li>
                  <li><b>Tamanho (di√¢metro)</b>: define o ‚Äúpeso‚Äù visual da esta√ß√£o.</li>
                  <li><b>Largura/Altura</b> (para Quadrado e P√≠lula): ajusta propor√ß√£o.
                    <ul>
                      <li>Na <b>P√≠lula</b>, o maior eixo vira o ‚Äúcomprimento‚Äù (pra n√£o virar um sabonete em crise üòÑ).</li>
                    </ul>
                  </li>
                  <li><b>Tamanho da borda</b>: espessura do contorno da esta√ß√£o.</li>
                  <li><b>Cor de preenchimento</b>: cor interna da esta√ß√£o.
                    <ul>
                      <li><b>Preenchimento padr√£o</b>: volta para o branco tradicional.</li>
                    </ul>
                  </li>
                  <li><b>Cor da borda</b>: cor do contorno.
                    <ul>
                      <li><b>Borda com a cor da linha</b>: volta a borda para o padr√£o ‚Äúna cor da linha‚Äù.</li>
                    </ul>
                  </li>
                  <li><b>Aplicar a todas as esta√ß√µes da linha ativa</b>: faz um ‚Äútema‚Äù de esta√ß√µes da linha num clique.</li>
                </ul>

                <h3>Nova esta√ß√£o conectada (atalho de produtividade)</h3>
                <p>
                  Com uma esta√ß√£o selecionada, voc√™ pode usar o bot√£o <b>Nova esta√ß√£o</b> no painel para criar uma nova esta√ß√£o j√° conectada √† linha ativa.
                  √â aquele modo ‚Äúprodu√ß√£o em s√©rie‚Äù pra expandir um trecho rapidinho.
                </p>

                <hr/>

                <h2>Linhas</h2>
                <p>
                  Linhas s√£o o ‚ÄúDNA‚Äù do seu mapa: nome, cor, espessura, estilo do tra√ßo e identifica√ß√µes (o c√≠rculo com texto curto).
                  Voc√™ sempre trabalha com uma <b>linha ativa</b>: novas esta√ß√µes e conex√µes entram nela.
                </p>

                <h3>Criar e escolher linha ativa</h3>
                <ol>
                  <li>Abra a se√ß√£o <b>Linhas</b>.</li>
                  <li>Clique em <b>+ Nova linha</b> para criar.</li>
                  <li>Na lista ‚ÄúTodas as linhas‚Äù, <b>clique numa linha</b> para torn√°-la ativa.</li>
                </ol>

                <h3>Nome e identifica√ß√£o (badge da linha)</h3>
                <ul>
                  <li><b>Nome</b>: o nome completo (ex.: ‚ÄúLinha Azul‚Äù).</li>
                  <li><b>Identifica√ß√£o</b>: liga/desliga o c√≠rculo com cor + texto curto que aparece no tra√ßado.</li>
                  <li><b>Texto da identifica√ß√£o</b>: at√© <b>2 caracteres</b> (pode ser ‚Äú1‚Äù, ‚ÄúA‚Äù, ‚Äú1A‚Äù e at√© emoji).</li>
                  <li><b>Posi√ß√£o</b>: ‚ÄúNo in√≠cio‚Äù ou ‚ÄúNo final‚Äù do tra√ßado (√≥timo pra mapas estilo sistema oficial).</li>
                </ul>

                <h3>Estilo da linha</h3>
                <ul>
                  <li><b>Cor</b>: define a identidade visual principal da linha.</li>
                  <li><b>Espessura</b>: grossura do tra√ßado.
                    <ul>
                      <li><b>Aplicar espessura a todas as linhas</b>: padroniza o mapa inteiro num clique.</li>
                    </ul>
                  </li>
                  <li><b>Tipo de tra√ßo</b>: s√≥lido, tracejado, pontilhado.</li>
                </ul>

                <h3>Tra√ßo secund√°rio (estilo ‚Äútrecho compartilhado‚Äù)</h3>
                <p>
                  O tra√ßo secund√°rio aparece <b>por dentro</b> do tra√ßo principal ‚Äî perfeito para representar
                  trechos compartilhados por duas linhas (aquele visual ‚ÄúRecife-like‚Äù / ‚Äúduas linhas no mesmo corredor‚Äù).
                </p>
                <ul>
                  <li>Ative <b>Tra√ßo secund√°rio</b>.</li>
                  <li>Escolha se a cor ser√° <b>Personalizada</b> ou <b>Usar cor de outra linha</b>.</li>
                </ul>

                <hr/>

                <h2>Conex√µes</h2>
                <p>
                  Conex√µes s√£o as liga√ß√µes entre esta√ß√µes (as ‚Äúarestas‚Äù). Elas pertencem a uma linha e definem o tra√ßado.
                  O Mobinode tem um jeito esperto de desenhar integra√ß√µes quando v√°rias linhas encostam na mesma esta√ß√£o.
                </p>

                <h3>Criar conex√£o entre esta√ß√µes</h3>
                <ul>
                  <li>No modo <b>Esta√ß√£o</b> (‚ö™): <b>arraste</b> de uma esta√ß√£o at√© outra para criar conex√£o na linha ativa.</li>
                  <li><b>ALT + arrastar</b>: encadeia conex√µes (voc√™ vai ligando uma sequ√™ncia sem parar toda hora).</li>
                  <li><b>Shift</b>: conecta r√°pido (sem encadear).</li>
                  <li>Dica: voc√™ pode arrastar para o <b>vazio</b> (em alguns fluxos) para criar uma nova esta√ß√£o conectada de cara.</li>
                </ul>

                <h3>Selecionar e editar uma conex√£o</h3>
                <ol>
                  <li><b>Clique na conex√£o</b> (no trecho da linha entre duas esta√ß√µes).</li>
                  <li>O painel mostra ‚ÄúConex√£o selecionada‚Äù e habilita a√ß√µes:</li>
                  <ul>
                    <li><b>Excluir conex√£o</b>: remove a liga√ß√£o (as esta√ß√µes continuam existindo).</li>
                    <li><b>Desselecionar</b>: limpa o foco da conex√£o.</li>
                  </ul>
                </ol>

                <h3>Tipo de conex√£o (integra√ß√£o visual)</h3>
                <p>
                  Quando m√∫ltiplas linhas se encontram numa esta√ß√£o, o Mobinode pode desenhar isso de duas formas:
                </p>
                <ul>
                  <li><b>Unificado</b>: todas as linhas ‚Äúcompartilham‚Äù o mesmo centro da esta√ß√£o (visual mais limpo e direto).</li>
                  <li><b>Empilhado</b>: cria ‚Äúportas‚Äù (mini-esta√ß√µes encostadinhas) para cada linha na integra√ß√£o, mostrando claramente quem √© quem.</li>
                </ul>
                <p>
                  Voc√™ escolhe isso em <b>Tipo de conex√£o</b> quando uma conex√£o est√° selecionada.
                </p>

                <h3>Curvas e dobras do tra√ßado</h3>
                <p>
                  Se voc√™ quiser um tra√ßado com uma dobra mais ‚Äúsuave‚Äù ou ajustar o caminho:
                </p>
                <ul>
                  <li>Use a ferramenta <b>Curvas</b> (‚ïÆ) para editar as dobras do segmento.</li>
                  <li>A ideia √©: o Mobinode mant√©m o tra√ßado estilo mapa (horizontal/vertical/diagonal), mas te d√° controle fino onde precisa.</li>
                </ul>

                <hr/>

                <h2>Sinaliza√ß√£o e textos</h2>
                <p>
                  Aqui √© onde voc√™ coloca o ‚Äúacabamento de sistema‚Äù: textos livres, identifica√ß√£o de linha (badge),
                  nome de linha, e o combo ‚Äúbadge + nome‚Äù.
                </p>

                <h3>Texto livre</h3>
                <ol>
                  <li>Selecione a ferramenta <b>üìê Texto e sinaliza√ß√£o</b>.</li>
                  <li>No painel, em <b>Texto livre</b>, digite o conte√∫do.</li>
                  <li><b>Clique no mapa</b> para posicionar o texto.</li>
                </ol>
                <p class="smallnote">
                  Dica: no modo üìê, <b>clicar no mapa cria texto por padr√£o</b>. Ou seja: voc√™ n√£o precisa escolher nada antes
                  se a ideia for s√≥ anotar ‚ÄúTerminal‚Äù, ‚ÄúCentro‚Äù, ‚ÄúIntegra√ß√£o‚Äù, ‚ÄúEm obras‚Äù, etc.
                </p>

                <h3>Identifica√ß√µes e nome de linha (sinaliza√ß√£o ‚Äúautom√°tica‚Äù)</h3>
                <p>
                  O Mobinode te deixa criar sinaliza√ß√µes baseadas nas linhas existentes (com cor e texto padronizados).
                  Isso evita ‚Äúcopiar/colar‚Äù e mant√©m tudo consistente.
                </p>
                <ul>
                  <li><b>Identifica√ß√µes</b>: gera o c√≠rculo com o texto curto (o mesmo da identifica√ß√£o da linha).</li>
                  <li><b>Nomes de linhas</b>: gera um r√≥tulo com o nome completo da linha (com bolinha de cor).</li>
                  <li><b>Identifica√ß√£o + nome</b>: o combo (badge + nome) num √∫nico elemento.</li>
                </ul>

                <h3>Transformar um texto existente em sinaliza√ß√£o (truque ninja)</h3>
                <ol>
                  <li><b>Selecione um texto</b> j√° colocado no mapa.</li>
                  <li>No painel, clique numa op√ß√£o de <b>Identifica√ß√£o</b> ou <b>Nome</b>.</li>
                  <li>O elemento selecionado vira sinaliza√ß√£o, mantendo sua posi√ß√£o ‚Äî sem precisar recriar.</li>
                </ol>

                <h3>Estilo do texto/sinaliza√ß√£o</h3>
                <ul>
                  <li><b>Tamanho</b>: ajuste pelo slider/num√©rico.</li>
                  <li><b>Negrito/it√°lico</b>: afeta principalmente sinaliza√ß√µes de <b>nome</b>.</li>
                  <li>Identifica√ß√µes (badge) tendem a usar um estilo ‚Äúfixo‚Äù pra continuar leg√≠vel e padronizado.</li>
                </ul>

                <h3>Apagar texto/sinaliza√ß√£o</h3>
                <ul>
                  <li>Selecione o elemento e pressione <b>Delete</b>, ou use <b>Excluir elemento</b> no painel.</li>
                </ul>

                <hr/>

                <h2>Sele√ß√£o</h2>
                <p>
                  A sele√ß√£o √© seu modo ‚Äúorganiza√ß√£o e cirurgia‚Äù: selecionar v√°rias esta√ß√µes, mover em conjunto e aplicar estilos em massa.
                </p>

                <h3>Selecionar v√°rias esta√ß√µes (marquee)</h3>
                <ol>
                  <li>Selecione a ferramenta <b>‚ñ≠ Sele√ß√£o</b>.</li>
                  <li><b>Clique e arraste</b> no canvas para desenhar um ret√¢ngulo de sele√ß√£o.</li>
                  <li>Ao soltar, todas as esta√ß√µes dentro entram na sele√ß√£o.</li>
                </ol>
                <ul>
                  <li><b>Shift</b>: soma na sele√ß√£o (ideal pra pegar grupos separados).</li>
                  <li>Depois de selecionadas, voc√™ pode <b>arrastar</b> para mover o grupo.</li>
                </ul>

                <h3>Edi√ß√£o em massa</h3>
                <p>
                  Com 2+ esta√ß√µes selecionadas, o painel <b>Sele√ß√£o</b> habilita controles para aplicar estilo em lote:
                </p>
                <ul>
                  <li>Forma (c√≠rculo/quadrado/losango/p√≠lula)</li>
                  <li>Tamanho (di√¢metro)</li>
                  <li>Largura/Altura (onde aplic√°vel)</li>
                  <li>Cores e borda</li>
                </ul>

                <h3>Limpar e apagar sele√ß√£o</h3>
                <ul>
                  <li><b>Limpar sele√ß√£o</b>: remove o conjunto selecionado, sem apagar nada.</li>
                  <li><b>Excluir sele√ß√£o</b>: apaga as esta√ß√µes selecionadas (e as conex√µes relacionadas).</li>
                </ul>

                <hr/>

                <h2>Fluxo recomendado (pra ficar ‚Äúmapa oficial‚Äù r√°pido)</h2>
                <ol>
                  <li>Crie/renomeie suas <b>linhas</b> e defina cor/espessura.</li>
                  <li>Escolha a <b>linha ativa</b> e v√° criando <b+nda>esta√ß√µes</b> no tra√ßado.</li>
                  <li>Conecte com arrastes e use <b>ALT</b> quando estiver ‚Äúem cadeia‚Äù.</li>
                  <li>Padronize o visual das esta√ß√µes da linha (estilo) e depois ajuste exce√ß√µes individualmente.</li>
                  <li>Finalize com <b>sinaliza√ß√µes</b> (badge/nome) e textos livres.</li>
                  <li>Use <b>sele√ß√£o</b> pra mover grupos e ‚Äúlimpar o layout‚Äù do mapa.</li>
                </ol>

                <p style="margin-top:14px; opacity:.8;">
                  Se voc√™ t√° pensando ‚Äúok, isso aqui parece simples, mas √© poderoso‚Äù‚Ä¶ √© exatamente isso. O Mobinode √© um canivete su√≠√ßo
                  disfar√ßado de editor minimalista. üòÑ
                </p>
              </div>
              </div>
          </section>
        </main>
      </div>
    </div>
  </div>


</div>

  <svg id="viewport">
    <defs>
      <clipPath id="clip">
        <rect x="-100000" y="-100000" width="200000" height="200000"></rect>
      </clipPath>
    </defs>

    <g id="world" clip-path="url(#clip)">
      <g id="grid"></g>
      <g id="edges"></g>
      <!-- ‚úÖ NOVO: camada de textos no mundo -->
      <g id="texts"></g>
      <g id="nodes"></g>
      <g id="connEdges"></g>
      <g id="connNodes"></g>
      <rect id="selectRect" class="select-rect" x="0" y="0" width="0" height="0" style="display:none;"></rect>
      <path id="ghost" class="ghost" d="" style="display:none;"></path>
    </g>
  </svg>
  <script src="./app_v4.9.0.part1.core.js"></script>
  <script src="./app_v4.9.0.part2.ui.js"></script>
  <script src="./app_v4.9.0.part3.interactions.js"></script>
  <script src="./app_v4.9.0.part4.io_boot.js"></script>

  <script>
  (function(){
    function bindAboutTabs(){
      var modal = document.getElementById("aboutModal");
      if(!modal || modal.__tabsBound) return;
      modal.__tabsBound = true;

      var navItems = Array.prototype.slice.call(modal.querySelectorAll(".about-nav-item[data-about-tab]"));
      var panes = Array.prototype.slice.call(modal.querySelectorAll(".about-pane[data-about-pane]"));

      function activate(key){
        navItems.forEach(function(b){ b.classList.toggle("active", b.dataset.aboutTab === key); });
        panes.forEach(function(p){ p.classList.toggle("active", p.dataset.aboutPane === key); });
      }

      navItems.forEach(function(btn){
        btn.addEventListener("click", function(){ activate(btn.dataset.aboutTab); });
      });

      // "Doar" (opcional): troque o link aqui quando quiser
      var donateBtn = modal.querySelector('[data-about-action="donate"]');
      if (donateBtn){
        donateBtn.addEventListener("click", function(){
          var url = donateBtn.getAttribute("data-href") || "";
          if (!url) return;
          window.open(url, "_blank", "noopener,noreferrer");
        });
      }

      // Sempre abrir na aba "O aplicativo"
      var btnAbout = document.getElementById("btnAbout");
      if (btnAbout){
        btnAbout.addEventListener("click", function(){ activate("app"); });
      }
      activate("app");
    }

    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", bindAboutTabs);
    } else {
      bindAboutTabs();
    }
  })();
  </script>
</body>

</html>
